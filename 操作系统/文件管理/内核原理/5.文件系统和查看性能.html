<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://noahyz.github.io/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/5.%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%92%8C%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BD.html"><meta property="og:site_name" content="noahyz的博客"><meta property="og:title" content="5.文件系统和查看性能"><meta property="og:description" content="文件系统 一、文件系统 Linux 中一切皆文件，普通的文件、目录、块设备、套接字、管道等都是文件，通过统一的文件系统来管理。Linux 文件系统为每个文件都分配两个数据结构，索引节点（index node）和目录项（directory entry）。他们主要用来记录文件的元信息和目录结构。 索引节点（inode）。用来记录文件的元数据，比如 inod..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="noahyz"><meta property="article:tag" content="linux"><meta property="article:published_time" content="2023-01-19T11:11:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"5.文件系统和查看性能","image":[""],"datePublished":"2023-01-19T11:11:41.000Z","dateModified":null,"author":[{"@type":"Person","name":"noahyz","url":"/about-the-author/"}]}</script><meta name="robots" content="all"><meta name="author" content="noahyz"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="Java, Java基础, 并发编程, JVM, 虚拟机, 数据库, MySQL, Spring, Redis, MyBatis, SpringBoot, IDEA, 求职面试, 面渣逆袭, 学习路线"><meta name="apple-mobile-web-app-capable" content="yes"><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5230ac143650bf5eb3c14f3fb9b1d3ec";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?59aa453e7e706422c636c079fc1cb031";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script><link rel="stylesheet" href="//at.alicdn.com/t/font_3180624_7cy10l7jqqh.css"><link rel="icon" href="/logo2.ico"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#096dd9"><title>5.文件系统和查看性能 | noahyz的博客</title><meta name="description" content="文件系统 一、文件系统 Linux 中一切皆文件，普通的文件、目录、块设备、套接字、管道等都是文件，通过统一的文件系统来管理。Linux 文件系统为每个文件都分配两个数据结构，索引节点（index node）和目录项（directory entry）。他们主要用来记录文件的元信息和目录结构。 索引节点（inode）。用来记录文件的元数据，比如 inod...">
    <link rel="preload" href="/assets/style-D4RaGlXo.css" as="style"><link rel="stylesheet" href="/assets/style-D4RaGlXo.css">
    <link rel="modulepreload" href="/assets/app-D1zlwylF.js"><link rel="modulepreload" href="/assets/5.文件系统和查看性能.html-DS4u4HEH.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/./logo.png" alt><!----><span class="vp-site-name hide-in-pad">noahyz的博客</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="知识库"><!--[--><span class="font-icon icon iconfont icon-lujing" style=""></span><!--]-->知识库<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">编程语言</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">操作系统</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">进程管理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">内存管理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">文件管理</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">一、内核原理</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/1.%E7%A3%81%E7%9B%98%E5%92%8C%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BD.html" aria-label="1.磁盘和查看性能"><!---->1.磁盘和查看性能<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/2.iowait%E7%9A%84%E7%90%86%E8%A7%A3.html" aria-label="2.iowait的理解"><!---->2.iowait的理解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/3.IO%E5%A4%8D%E7%94%A8.html" aria-label="3.IO复用"><!---->3.IO复用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/4.epoll%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95.html" aria-label="4.epoll问题记录"><!---->4.epoll问题记录<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/5.%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%92%8C%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BD.html" aria-label="5.文件系统和查看性能"><!---->5.文件系统和查看性能<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/6.DMA%E5%92%8C%E9%9B%B6%E6%8B%B7%E8%B4%9D%E6%8A%80%E6%9C%AF.html" aria-label="6.DMA和零拷贝技术"><!---->6.DMA和零拷贝技术<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/7.Inotify%E8%AF%A6%E8%A7%A3.html" aria-label="7.Inotify详解"><!---->7.Inotify详解<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/8.%E6%83%8A%E7%BE%A4%E6%95%88%E5%BA%94.html" aria-label="8.惊群效应"><!---->8.惊群效应<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/9.linux%E6%9D%83%E9%99%90%E5%92%8Cumask%E5%80%BC.html" aria-label="9.linux权限和umask值"><!---->9.linux权限和umask值<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/9.netlink%E4%BC%98%E7%BC%BA%E7%82%B9.html" aria-label="9.netlink优缺点"><!---->9.netlink优缺点<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/10.linux%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90.html" aria-label="10.linux系统日志分析"><!---->10.linux系统日志分析<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">二、工具运维</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">CPU管理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">问题排查</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">系统编程</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">计算机网络</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">技术专题</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">架构框架</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">分布式</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->5.文件系统和查看性能</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/about-the-author/" target="_blank" rel="noopener noreferrer">noahyz</a></span><span property="author" content="noahyz"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-01-19T11:11:41.000Z"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">linux</span><!--]--><meta property="keywords" content="linux"></span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 2453 字</span><meta property="wordCount" content="2453"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 8 分钟</span><meta property="timeRequired" content="PT8M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#文件系统">文件系统</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#一、文件系统">一、文件系统</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#二、虚拟文件系统">二、虚拟文件系统</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#三、观察文件系统性能">三、观察文件系统性能</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="文件系统" tabindex="-1"><a class="header-anchor" href="#文件系统"><span>文件系统</span></a></h2><h3 id="一、文件系统" tabindex="-1"><a class="header-anchor" href="#一、文件系统"><span>一、文件系统</span></a></h3><p>Linux 中一切皆文件，普通的文件、目录、块设备、套接字、管道等都是文件，通过统一的文件系统来管理。Linux 文件系统为每个文件都分配两个数据结构，索引节点（index node）和目录项（directory entry）。他们主要用来记录文件的元信息和目录结构。</p><ul><li>索引节点（inode）。用来记录文件的元数据，比如 inode 编号、文件大小、访问权限、修改日期、数据的位置等。索引节点和文件一一对应，它跟文件内容一样，都会被持久化存储到磁盘中。所以索引节点同样占用磁盘空间</li><li>目录项（dentry）。用来记录文件的名字、索引节点指针以及与其他目录项的关联关系。多个关联的目录项，就构成了文件系统的目录结构。不过，不同于索引节点，目录项是由内核维护的一个内存数据结构，所以通常也被叫做目录项缓存</li></ul><p>索引节点是每个文件的唯一标志，而目录项维护的正是文件系统的树状结构。目录项和索引节点的关系是多对一。通过硬链接为文件创建的别名，会对应不同的目录项，不过这些目录项都有相同的 inode 编号，指向相同的 inode。</p><p>磁盘在执行文件系统格式化时，会被分成四个存储区域：</p><ul><li>自举块、超级块：存储整个文件系统的状态</li><li>索引节点区：用来存储索引节点</li><li>数据块区：用来存储文件数据</li></ul><p>我们把一个磁盘分成一个或多个分区。每个分区可以包含一个文件系统。i 节点是固定长度的记录项，它包含有关文件的大部分信息</p><img src="/assets/%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA-DL2ZPJXn.jpg" style="zoom:80%;"><p>如下是一个柱面组的 i 节点和数据块部分</p><figure><img src="/assets/%E6%9F%B1%E9%9D%A2%E7%BB%84-B_7J-wPE.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>硬链接，有两个目录项指向同一个 i 节点。每个 i 节点中都有一个链接计数，其值是指向该 i 节点的目录项数。只有当链接计数减少至 0 时，才可以删除该文件（也就是可以释放该文件占用的数据块）。在 stat 结构中，链接计数包含在 st_nlink 成员中，其基本系统数据类型是 nlink_t，称为硬链接。</li><li>符号链接（软链接）。符号链接文件的实际内容（在数据块中）包含了该符号链接所指向的文件的名字，比如 <code> lib -&gt; /usr/lib</code>，目录项中名为 lib 的文件保存了 7 字节的数据 <code>/usr/lib</code>。且该 i 节点中的文件类型是 S_IFLINK，系统就是知道这是一个符号链接</li><li>i 节点包含了文件有关的所有信息：文件类型、文件访问权限位、文件长度和指向文件数据块的指针等。只有两项重要数据存放在目录项中：文件名和 i 节点编号。</li><li>因为目录项中的 i 节点编号指向同一文件系统中的相应 i 节点，一个目录项不能指向另一个文件系统的 i 节点。</li><li>当在不更新文件系统的情况下为一个文件重命名时，该文件的实际内容并未移动，只需要构造一个指向现有 i 节点的新目录项，并删除老的目录项。链接计数不会改变。</li></ul><h4 id="创建一个目录场景" tabindex="-1"><a class="header-anchor" href="#创建一个目录场景"><span>创建一个目录场景</span></a></h4><p>执行 <code>mkdir testdir</code> 命令之后</p><img src="/assets/%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95-B90Jpd00.jpg" style="zoom:80%;"><ul><li>编号为 2549 的 i 节点，其类型字段表示他是一个目录，链接计数为 2</li><li>任何一个叶目录（不包含任何其他目录的目录）的链接计数总是 2，数值 2 来自于命名该目录（testdir）的目录项以及在该目录中的 <code>.</code> 项</li><li>编号为 1267 的 i 节点，其类型字段表示他是一个目录，链接计数大于或者等于 3，因为一个是命名它的目录项（未画出来），第二个是该目录中的 <code>.</code> 项，第三个是它的子目录中的 <code>..</code> 项</li><li>在父目录中的每一个字目录都使该父目录的链接计数增加 1</li></ul><h3 id="二、虚拟文件系统" tabindex="-1"><a class="header-anchor" href="#二、虚拟文件系统"><span>二、虚拟文件系统</span></a></h3><p>为了支持各种不同的文件系统，Linux 内核在用户进程和文件系统的中间，引入了抽象层，也就是虚拟文件系统 VFS（Virtual File System）。VFS 定义了一组所有文件系统都支持的数据结构和标准接口。这样，用户进程和内核中的其他子系统，只需要跟 VFS 提供的统一接口进行交互就可以了，而不需要再关心底层各种文件系统的实现细节。</p><img src="/assets/%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F-DVxSFaXe.png" alt="s" style="zoom:80%;"><p>在 VFS 的下方，Linux 支持各种各样的文件系统。如 Ext4、XFS、NFS 等等。按照存储位置的不同，这些文件系统可以分为三类</p><ul><li>第一类是基于磁盘的文件系统，也就是把数据直接存储在计算机本地挂载的磁盘中。常见的 Ext4、XFS、OverlayFS 等，都是这类文件系统。</li><li>第二类是基于内存的文件系统，也就是我们常说的虚拟文件系统。这类文件系统，不需要任何磁盘分配存储空间，但会占用内存。我们经常用到的 /proc 文件系统，其实就是一种最常见的虚拟文件系统。此外，/sys 文件系统也属于这一类，主要向用户空间导出层次化的内核对象</li><li>第三类是网络文件系统，也就是用来访问其他计算机数据的文件系统，比如 NFS、SMB、iSCSI 等。</li></ul><p>这些文件系统，要先挂载到 VFS 目录树中的某个子目录（称为挂载点），然后才能访问其中的文件。拿第一类，也就是基于磁盘的文件系统为例，在安装系统时，要先挂载一个根目录（/），在根目录下再把其他文件系统（比如其他的磁盘分区、/proc 文件系统、/sys 文件系统、NFS 等）挂载进来。</p><h3 id="三、观察文件系统性能" tabindex="-1"><a class="header-anchor" href="#三、观察文件系统性能"><span>三、观察文件系统性能</span></a></h3><h4 id="_1-容量" tabindex="-1"><a class="header-anchor" href="#_1-容量"><span>1. 容量</span></a></h4><ul><li>查看文件系统的磁盘空间使用情况</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  [/usr/local/bin] df -h</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Size</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Used</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Avail</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Use%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/dev/vda1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        99G</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   81G</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   14G</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  86%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        7.7G</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  7.7G</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           7.7G</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  7.7G</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev/shm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>索引节点也占用磁盘空间，查看索引节点的使用情况</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  [/usr/local/bin] df -i</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       Inodes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   IUsed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    IFree</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IUse%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/dev/vda1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       6553600</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1295152</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  5258448</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   20%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">        2009249</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1452</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  2007797</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    1%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">           2011523</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       9</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  2011514</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    1%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev/shm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当遇到空间不足时，使用 df 查看磁盘空间后，却发现剩余空间还有很多。这是我们可以查看索引节点的使用情况，索引节点的容量（也就是 inode 个数）是在格式化磁盘时设定好的，一般由格式化工具自动生成。当你发现索引节点空间不足，但磁盘空间充足时，很可能就是过多小文件导致的。</p><h4 id="_2-缓存" tabindex="-1"><a class="header-anchor" href="#_2-缓存"><span>2. 缓存</span></a></h4><p>free 输出的 Cache，是页缓存和可回收 Slab 缓存的和，你可以从 /proc/meminfo ，直接得到它们的大小</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  [/usr/local/bin] cat /proc/meminfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;SReclaimable|Cached&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Cached:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          1932632</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">SwapCached:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">            0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">SReclaimable:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     324120</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内核使用 Slab 机制，管理目录项和索引节点的缓存。<code>/proc/meminfo</code> 只给出了 Slab 的整体大小，具体到每一种 Slab 缓存，还要查看 <code>/proc/slabinfo</code> 这个文件。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  [/usr/local/bin] cat /proc/slabinfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;^#|dentry|inode&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># name            &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;limit&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : slabdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;sharedavail&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rpc_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    640</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mqueue_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    288</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    288</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    896</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   36</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      8</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      8</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">udf_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    704</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   23</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isofs_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    608</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   26</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">fat_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    688</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   23</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">hugetlbfs_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    576</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">jbd2_inode</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          7298</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  14110</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   85</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    166</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    166</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ext4_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  202624</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 202624</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    984</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   33</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   6141</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   6141</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ext2_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    728</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   22</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ext3_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    784</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">inotify_inode_mark</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   5474</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   5474</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    120</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   34</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    161</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    161</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sock_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1500</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   1500</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    640</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     60</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     60</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shmem_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  23400</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  23400</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    648</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    936</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    936</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">proc_inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    6618</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   7325</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    640</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    293</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    293</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">inode_cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">        16433</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  16907</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    560</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   29</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    583</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    583</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dentry</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">            315911</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 316760</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    200</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   20</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tunables</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slabdata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  15838</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  15838</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>dentry 行表示目录项缓存，inode_cache 行表示 VFS 索引节点缓存，其余的则是各种文件系统的索引节点缓存</li></ul><p>使用 slabtop 找到占用内存最多的缓存类型</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 按下 c 按照缓存大小排序，按下 a 按照活跃对象数排序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[/usr/local/bin] slabtop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Total</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (% </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">used</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)    </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 1364167 / 1441535 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">94.6%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Active</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Total</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Slabs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (% </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">used</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 42114 / 42114 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">100.0%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Active</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Total</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Caches</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (% </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">used</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)     </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 132 / 205 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">64.4%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Active</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Total</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (% </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">used</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)       </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 389699.93K / 400512.44K (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">97.3%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Minimum</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Average</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Maximum</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Object</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0.01K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0.28K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8.00K</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  OBJS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ACTIVE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  USE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OBJ</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> SIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  SLABS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> OBJ/SLAB</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CACHE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> SIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">202624</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 202624</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 100%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.96K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   6141</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       33</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    196512K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ext4_inode_cache</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">316940</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 316464</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  99%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.20K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  15847</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     63388K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dentry</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">269997</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 266468</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  98%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.10K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   6923</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       39</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     27692K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> buffer_head</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 23400</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  23400</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 100%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.63K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    936</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       25</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     14976K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shmem_inode_cache</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 18088</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  17703</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  97%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.55K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    646</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       28</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     10336K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> radix_tree_node</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 16907</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  16436</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  97%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.55K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    583</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       29</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      9328K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> inode_cache</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1078</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    970</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  89%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    6.45K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    283</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">        4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      9056K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> task_struct</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">203286</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 203286</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 100%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    0.04K</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   1993</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      102</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      7972K</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ext4_extent_status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如上，可以看到，ext4_inode_cache 和 dentry 占用了最多的 Slab 缓存，占用空间 259M （196512K + 63388K）</p><p>比如执行 find 命令时，就会增加 <code>inode cache &amp; dentry &amp; proc inode cache</code> 这些缓存会升高</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/4.epoll%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95.html" aria-label="4.epoll问题记录"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->4.epoll问题记录</div></a><a class="route-link auto-link next" href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86/6.DMA%E5%92%8C%E9%9B%B6%E6%8B%B7%E8%B4%9D%E6%8A%80%E6%9C%AF.html" aria-label="6.DMA和零拷贝技术"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">6.DMA和零拷贝技术<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D1zlwylF.js" defer></script>
  </body>
</html>
