import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,o}from"./app-D1zlwylF.js";const t={};function r(s,e){return o(),i("div",null,e[0]||(e[0]=[a(`<h2 id="load不到共享库" tabindex="-1"><a class="header-anchor" href="#load不到共享库"><span>load不到共享库</span></a></h2><h3 id="问题描述" tabindex="-1"><a class="header-anchor" href="#问题描述"><span>问题描述</span></a></h3><p>我在开发机上写好了代码，引用了jsoncpp库和curl库。新手直接将两个库放在了/usr/local/lib下，并且makefile写的是/usr/local/lib，使用的动态编译。然后将编译好的二进制文件打包到运维机器上，启动运行时，出现</p><p><code>lcw: error while loading shared libraries: libjson.so.0: cannot open shared object file: No such file or directory</code></p><h3 id="问题解决" tabindex="-1"><a class="header-anchor" href="#问题解决"><span>问题解决</span></a></h3><ul><li>我意识到我运维机器上根本没有装这两个库。于是打包二进制文件的时候带上两个库，并且makefile库位置。</li><li>放在运维机器上再次运行的时候又出现了刚才的问题。于是，我想可能是执行调用该共享库的时候，程序按照默认共享库路径找不到该共享库文件。</li><li>将共享库路径添加到 /etc/ld.so.conf 并且ldconfig 之后，程序运行成功。</li></ul><h3 id="扩展" tabindex="-1"><a class="header-anchor" href="#扩展"><span>扩展</span></a></h3><p>这种问题一般有两种原因</p><ol><li>操作系统里面的确没有该共享库(lib* .so. * ) 文件，或者共享库版本不对。</li><li>已经安装了该共享库，但是执行需要调用该共享库程序的时候，程序按照默认的共享路径找不到该共享库文件<br> 介绍一个命令</li></ol><ul><li>ldconfig：主要是在默认搜寻目录(/lib和/usr/lib) 以及动态库配置文件(/etc/ld.so.conf) 内所列的目录下，搜索可共享的动态链接库(格式 lib*.so. * )，进而创建出动态装入程序 (<a href="http://ld.so" target="_blank" rel="noopener noreferrer">ld.so</a>) 所需的连接和缓存文件。缓存文件默认为 /etc/ld.so.cach，此文件保存已排好序的动态链接库名字列表。</li></ul><ol><li>如果那个库本来在 /lib或者 /usr/lib 下，则只需要执行下 ldconfig 命令更新一下动态装入程序。</li><li>如果共享库文件安装在了比如： /use/local/lib 下或者其他&quot;非 /lib 或 非 /usr/lib&quot; 目录下，那么执行ldconfig命令前，还要把新共享库加入到共享库配置文件 /etc/ld.so.conf 中。如下</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat /etc/ld.so.conf</span></span>
<span class="line"><span>echo &quot;/usr/local/lib&quot; &gt;&gt; /etc/ld.so.conf</span></span>
<span class="line"><span>ldconfig</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>如果共享库文件安装到了其他“非 /lib 或者 非 /usr/lib” 目录下，但是又不想在 /etc/ld.so.conf 中加路径(或者是没有权限加路径)，那就可以export 一个全局变量 LD_LIBRARY_PATH，然后运行程序的时候就会去这个目录中找共享库。</li></ol><p>LD_LIBRARY_PATH 告诉loader 在那个目录中可以找到共享库。可以设置多个目录，这些目录用冒号分割。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>export LD_LIBRARY_PATH=/usr/local/mysql/lib:$LD_LIBRARY_PATH</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这中方法只能临时使用，用于当前客户端当前客户。</p>`,16)]))}const d=l(t,[["render",r],["__file","4.load不到共享库.html.vue"]]),h=JSON.parse('{"path":"/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/4.load%E4%B8%8D%E5%88%B0%E5%85%B1%E4%BA%AB%E5%BA%93.html","title":"4.load不到共享库","lang":"zh-CN","frontmatter":{"title":"4.load不到共享库","date":"2021-03-07T21:11:41.000Z","tags":["load"],"description":"load不到共享库 问题描述 我在开发机上写好了代码，引用了jsoncpp库和curl库。新手直接将两个库放在了/usr/local/lib下，并且makefile写的是/usr/local/lib，使用的动态编译。然后将编译好的二进制文件打包到运维机器上，启动运行时，出现 lcw: error while loading shared librari...","head":[["meta",{"property":"og:url","content":"https://noahyz.github.io/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/4.load%E4%B8%8D%E5%88%B0%E5%85%B1%E4%BA%AB%E5%BA%93.html"}],["meta",{"property":"og:site_name","content":"noahyz的博客"}],["meta",{"property":"og:title","content":"4.load不到共享库"}],["meta",{"property":"og:description","content":"load不到共享库 问题描述 我在开发机上写好了代码，引用了jsoncpp库和curl库。新手直接将两个库放在了/usr/local/lib下，并且makefile写的是/usr/local/lib，使用的动态编译。然后将编译好的二进制文件打包到运维机器上，启动运行时，出现 lcw: error while loading shared librari..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"noahyz"}],["meta",{"property":"article:tag","content":"load"}],["meta",{"property":"article:published_time","content":"2021-03-07T21:11:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"4.load不到共享库\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-03-07T21:11:41.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"noahyz\\",\\"url\\":\\"/about-the-author/\\"}]}"]]},"headers":[{"level":2,"title":"load不到共享库","slug":"load不到共享库","link":"#load不到共享库","children":[{"level":3,"title":"问题描述","slug":"问题描述","link":"#问题描述","children":[]},{"level":3,"title":"问题解决","slug":"问题解决","link":"#问题解决","children":[]},{"level":3,"title":"扩展","slug":"扩展","link":"#扩展","children":[]}]}],"git":{},"readingTime":{"minutes":2.22,"words":666},"filePathRelative":"操作系统/问题排查/4.load不到共享库.md","localizedDate":"2021年3月8日","excerpt":"<h2>load不到共享库</h2>\\n<h3>问题描述</h3>\\n<p>我在开发机上写好了代码，引用了jsoncpp库和curl库。新手直接将两个库放在了/usr/local/lib下，并且makefile写的是/usr/local/lib，使用的动态编译。然后将编译好的二进制文件打包到运维机器上，启动运行时，出现</p>\\n<p><code>lcw: error while loading shared libraries: libjson.so.0: cannot open shared object file: No such file or directory</code></p>\\n<h3>问题解决</h3>","autoDesc":true}');export{d as comp,h as data};
